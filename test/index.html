<!DOCTYPE html>
<!-- Created with https://packager.turbowarp.org/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>test2</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #ff4c4c26;
    }
    .control-button.active {
      background: #ff4c4c59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 480;
      scaffolding.height = 360;
      scaffolding.resizeMode = "dynamic-resize";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#ff4c4c");

      scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@test2.sb3"));

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(false);
      if (vm.setFramerate) vm.setFramerate(30);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(false);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: false,
        miscLimits: true,
        maxClones: 9999999999,
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: 'unsandboxed',
        canLoadExtensionFromProject: (url) => {
          handleError(new Error('Missing custom extension: ' + url));
          return Promise.resolve(false);
        }
      });
      for (const extension of ["data:application/javascript,(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20%2F%2F!Why%20can't%20I%20draw%20lines%20and%20tris%20at%20the%20same%20time%3F%0A%20%20%2F%2F*But%20I%20can%20draw%20tris%20stamps%20and%20sprites%20at%20the%20same%20time%3F%20WHY%0A%0A%20%20%2F%2F%3FNote%20to%20garboMuffin%20I%20use%20this%20class%20called%20%22ExtensionBuilder%22%20that%20I%20made%20to%20make%20the%20workflow%20faster%20so%20I%20don't%20have%20to%20spend%20as%20much%20time%20checking%20and%20modifying%20JSON%20data.%0A%20%20%2F%2F%3FAlso%20I%20really%20like%20the%20syntax%20compared%20to%20JSON.%0A%0A%20%20%2F*%20eslint-disable%20*%2F%0A%20%20class%20ExtensionBuilder%7Bconstructor(t%2Cn%2Ce%2Ci)%7BScratch%3DScratch%7C%7C%7BTargetType%3A%7BSPRITE%3A%22sprite%22%2CSTAGE%3A%22stage%22%7D%2CBlockType%3A%7BCOMMAND%3A%22command%22%2CREPORTER%3A%22reporter%22%2CBOOLEAN%3A%22Boolean%22%2CHAT%3A%22hat%22%7D%2CArgumentType%3A%7BSTRING%3A%22string%22%2CNUMBER%3A%22number%22%2CCOLOR%3A%22color%22%2CANGLE%3A%22angle%22%2CBOOLEAN%3A%22Boolean%22%2CMATRIX%3A%22matrix%22%2CNOTE%3A%22note%22%7D%2Cvm%3Awindow.vm%2CCast%3A%7BtoNumber%3At%3D%3ENumber(t)%2CtoString%3At%3D%3EString(t)%2CtoBoolean%3At%3D%3EBoolean(t)%7D%2Cextensions%3A%7Bunsandboxed%3A!0%2Cregister(t)%7Blet%20n%3Dvm.extensionManager._registerInternalExtension(t)%3Bvm.extensionManager._loadedExtensions.set(t.getInfo().id%2Cn)%7D%7D%7D%2Cthis.internal%3D%7B%7D%2Cthis.internal.JSON%3D%7Bblocks%3A%5B%5D%2Cmenus%3A%7B%7D%7D%2Cthis.internal.defaultFunction%3D%7Bcode()%7Bconsole.log(%22This%20block%20has%20no%20code%22)%7D%2Carguments%3A%7B%7D%7D%2Cthis.addDocs%3Dt%3D%3E%7Bthis.internal.JSON.docsURI%3Dt%7D%2Cthis.addBlock%3D(t%2Cn%2Ce%2Ci%2Co%2Cl)%3D%3E%7Bi%3Di%7C%7Cthis.internal.defaultFunction.code%2Cthis%5Bn%5D%3Di%2Cl%3Dl%7C%7C%7B%7D%3Blet%20s%3Dl%3Bs.disableMonitor%7C%7C(s.disableMonitor%3D!0)%2Cs.opcode%3Dn%2Cs.blockType%3De%2Cs.text%3Dt%2Cs.arguments%3Do%7C%7Cthis.internal.defaultFunction.arguments%3Blet%20r%3Dthis.internal.JSON.blocks.length%3Breturn%20this.internal.JSON.blocks.push(s)%2Cthis.internal.JSON.blocks%5Br%5D.addArgument%3D(t%2Cn%2Ce%2Ci)%3D%3E%7Bif(null%3D%3D(e%3De%7C%7Cnull))switch(typeof%20n)%7Bcase%22string%22%3Adefault%3Ae%3DScratch.ArgumentType.STRING%3Bbreak%3Bcase%22boolean%22%3Ae%3DScratch.ArgumentType.BOOLEAN%3Bbreak%3Bcase%22number%22%3Acase%22bigint%22%3Ae%3DScratch.ArgumentType.NUMBER%7Dreturn%20null%3D%3Dn%3Fthis.internal.JSON.blocks%5Br%5D.arguments%5Bt%5D%3D%7Btype%3Ae%7D%3Athis.internal.JSON.blocks%5Br%5D.arguments%5Bt%5D%3D%7Btype%3Ae%2CdefaultValue%3An%7D%2C(i%3Di%7C%7Cnull)%26%26%22string%22%3D%3Dtypeof%20i%26%26(this.internal.JSON.blocks%5Br%5D.arguments%5Bt%5D.menu%3Di)%2Cthis.internal.JSON.blocks%5Br%5D%7D%2Cthis.internal.JSON.blocks%5Br%5D.setIcon%3Dt%3D%3E%7Bthis.internal.JSON.blocks%5Br%5D.blockIconURI%3Dt%7D%2Cthis.internal.JSON.blocks%5Br%5D.setFilter%3Dt%3D%3E(t%3Dt%7C%7CScratch.TargetType.SPRITE%2Cthis.internal.JSON.blocks%5Br%5D.filter%3Dt%2Cthis.internal.JSON.blocks%5Br%5D)%2Cthis.internal.JSON.blocks%5Br%5D.hideBlock%3D()%3D%3E%7Bthis.internal.JSON.blocks%5Br%5D.hideFromPalette%3D!0%7D%2Cthis.internal.JSON.blocks%5Br%5D.stopMoniter%3D()%3D%3E%7Bthis.internal.JSON.blocks%5Br%5D.disableMonitor%3D!0%7D%2Cthis.internal.JSON.blocks%5Br%5D%7D%2Cthis.addMenu%3D(t%2Cn%2Ce)%3D%3E%7Be%3De%7C%7C!1%2C%22function%22%3D%3Dtypeof%20n%3F(this%5Bt%2B%22Function%22%5D%3Dn%2Cthis.internal.JSON.menus%5Bt%5D%3D%7Bitems%3At%2B%22Function%22%7D)%3Athis.internal.JSON.menus%5Bt%5D%3D%7Bitems%3An%7D%2Cthis.internal.JSON.menus%5Bt%5D.acceptReporters%3De%7D%2Cthis.addDivider%3D()%3D%3E%7Bthis.internal.JSON.blocks.push(%22---%22)%7D%2Cthis.addLabel%3Dt%3D%3E%7Bt%3Dt%7C%7C%22N%2FA%22%3Blet%20n%3D%7Bopcode%3A%22__NOUSEOPCODE%22%2CblockType%3A%22label%22%2Ctext%3At%7D%3Bthis.internal.JSON.blocks.push(n)%7D%2Cthis.__NOUSEOPCODE%3D()%3D%3E%7B%7D%2Cthis.internal.createBase%3D()%3D%3E%7Bif(t%3Dt%7C%7C%22Extension%22%2Cn%3Dn%7C%7C%22extension%22%2Cthis.internal.JSON.name%3Dt%2Cthis.internal.JSON.id%3Dn%2C(e%3De%7C%7C%7B%7D).blockColor%3De.blockColor%7C%7Cnull%2Ce.inputColor%3De.inputColor%7C%7Cnull%2Ce.outlineColor%3De.outlineColor%7C%7Cnull%2Cnull!%3De.blockColor)%7Blet%20o%3De.blockColor%3Bo%3E8947848%3Fthis.internal.colors%3D%5Bo%2Co-197379%2Co-394758%2C%5D%3Athis.internal.colors%3D%5Bo%2Co%2B197379%2Co%2B394758%2C%5D%2Ce.inputColor%2Cthis.internal.colors%5B1%5D%3De.inputColor%2Ce.outlineColor%2Cthis.internal.colors%5B2%5D%3De.outlineColor%2Cthis.internal.JSON.color1%3Dthis.internal.colors%5B0%5D%2Cthis.internal.JSON.color2%3Dthis.internal.colors%5B1%5D%2Cthis.internal.JSON.color3%3Dthis.internal.colors%5B2%5D%7D(i%3Di%7C%7C%7B%7D).blockIconUri%3Di.blockIconUri%7C%7Cnull%2Ci.menuIconUri%3Di.menuIconUri%7C%7Ci.blockIconUri%7C%7Cnull%2Cthis.menuUri%3Di.menuIconUri%2Cthis.blockIco%3Di.blockIconUri%2Cthis.docsUri%3Dnull%7D%2Cthis.internal.createBase()%2Cthis.setColors%3D(t%2Cn%2Ce)%3D%3E%7Bt%3D%22string%22%3D%3Dtypeof%20t%3Ft%3A(t%2B0).toString(16)%2Cn%3D%22string%22%3D%3Dtypeof%20n%3Fn%3A(n%2B0).toString(16)%2Ce%3D%22string%22%3D%3Dtypeof%20e%3Fe%3A(e%2B0).toString(16)%2Cthis.internal.colors%3D%5B0%2C0%2C0%5D%2Cthis.internal.colors%5B0%5D%3Dt%2Cthis.internal.colors%5B1%5D%3Dn%2Cthis.internal.colors%5B2%5D%3De%2Cthis.internal.JSON.color1%3Dt%2Cthis.internal.JSON.color2%3Dn%2Cthis.internal.JSON.color3%3De%7D%2Cthis.setMenuIcon%3Dt%3D%3E%7Bthis.internal.JSON.menuIconURI%3Dt%7D%2Cthis.setGlobalBlockIcon%3Dt%3D%3E%7Bthis.internal.JSON.blockIconURI%3Dt%7D%2Cthis.getInfo%3D()%3D%3Ethis.internal.JSON%2Cthis.register%3D()%3D%3E%7BScratch.extensions.register(this)%7D%7D%7D%0A%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20const%20menuIco%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzMi45OTk3MiIgaGVpZ2h0PSIzMi44ODIwNyIgdmlld0JveD0iMCwwLDMyLjk5OTcyLDMyLjg4MjA3Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI0LC0xNjMuOTk5OTMpIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHBhdGggZD0iTTIyOC43NTMsMTk0LjYwMmwtNC4yNSwxLjc4bDEuNzgzLC00LjIzN2MxLjIxOCwtMi44OTIgMi45MDcsLTUuNDIzIDUuMDMsLTcuNTM4bDE5Ljc1LC0xOS42NzdjMC44NDYsLTAuODQyIDIuNjUsLTAuNDEgNC4wMzIsMC45NjdjMS4zOCwxLjM3NSAxLjgxNiwzLjE3MyAwLjk3LDQuMDE1bC0xOS43NSwxOS42NzhjLTIuMTIzLDIuMTE2IC00LjY2NCwzLjggLTcuNTY1LDUuMDEyIiBmaWxsPSIjZmZmZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPHBhdGggZD0iTTIzNi44NTgsMTczLjQyOGMwLDAgMi42MTYsMi4yMiA0LjM1LC0xLjU0NmMzLjc1MiwtOC4xNSA4LjIwMiwtNS43NzIgOC4yMDIsLTUuNzcyIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPHBhdGggZD0iTTI1Ni40MiwxNjguODI1YzAsMC40NjMgLTAuMTQsMC44NzMgLTAuNDMyLDEuMTY0bC05LjMzNSw5LjNjMC4yODIsLTAuMjkgMC40MSwtMC42NjggMC40MSwtMS4xMmMwLC0wLjg3NCAtMC41MDcsLTEuOTYzIC0xLjQwNiwtMi44NjhjLTEuMzYyLC0xLjM1OCAtMy4xNDcsLTEuOCAtNC4wMDIsLTAuOTlsOS4zMzUsLTkuMzAxYzAuODQ0LC0wLjg0IDIuNjUsLTAuNDEgNC4wMzUsMC45NmMwLjg5OCwwLjkwNCAxLjM5NiwxLjk4MiAxLjM5NiwyLjg1NU0yMzAuNTE1LDE5My43NzRjLTAuNTczLDAuMzAyIC0xLjE1NywwLjU3IC0xLjc2NCwwLjgzbC00LjI1MSwxLjc3OGwxLjc4NiwtNC4yMzVjMC4yNTgsLTAuNjA0IDAuNTMsLTEuMTg2IDAuODMzLC0xLjc1N2MwLjY5LDAuMTgzIDEuNDQ4LDAuNjI1IDIuMTA4LDEuMjgyYzAuNjYsMC42NTggMS4xMDIsMS40MTIgMS4yODcsMi4xMDIiIGZpbGw9IiM0Yzk3ZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMjU2LjQ5OCwxNjguNzQ4YzAsMC40NjQgLTAuMTQsMC44NzQgLTAuNDMzLDEuMTY1bC0xOS43NDIsMTkuNjhjLTIuMTMsMi4xMSAtNC42NzMsMy43OTMgLTcuNTcyLDUuMDFsLTQuMjUxLDEuNzc3bDAuOTc0LC0yLjMxNmwxLjkyNSwtMC44MDhjMi44OTgsLTEuMjE4IDUuNDQsLTIuOSA3LjU3LC01LjAxbDE5Ljc0MywtMTkuNjhjMC4yOTIsLTAuMjkyIDAuNDMyLC0wLjcwMiAwLjQzMiwtMS4xNjVjMCwtMC42NDYgLTAuMjcsLTEuNCAtMC43OCwtMi4xMjJjMC4yNSwwLjE3MiAwLjUsMC4zNzcgMC43MzcsMC42MTRjMC44OTgsMC45MDUgMS4zOTYsMS45ODMgMS4zOTYsMi44NTYiIGZpbGw9IiM1NzVlNzUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIG9wYWNpdHk9IjAuMTUiLz48cGF0aCBkPSJNMjM4LjQ1LDE3Mi44M2MwLDAuNSAtMC40MDQsMC45MDUgLTAuOTA0LDAuOTA1Yy0wLjUsMCAtMC45MDUsLTAuNDA1IC0wLjkwNSwtMC45MDRjMCwtMC41IDAuNDA3LC0wLjkwMyAwLjkwNiwtMC45MDNjMC41LDAgMC45MDQsMC40MDQgMC45MDQsMC45MDR6IiBmaWxsPSIjNTc1ZTc1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPHBhdGggZD0iTTI0NC45OTgwNywxODcuMDUyOThoOS41MTc2NSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8%2BPHBhdGggZD0iTTI0OS43NTY4OSwxOTEuODExOHYtOS41MTc2NSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8%2BPC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6MTY6MTYuMDAwMDY5MjMwODQyMTQzLS0%2B%22%3B%0A%20%20const%20blockIco%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU%2BcGVuLWljb248L3RpdGxlPjxnIHN0cm9rZT0iIzU3NUU3NSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik04Ljc1MyAzNC42MDJsLTQuMjUgMS43OCAxLjc4My00LjIzN2MxLjIxOC0yLjg5MiAyLjkwNy01LjQyMyA1LjAzLTcuNTM4TDMxLjA2NiA0LjkzYy44NDYtLjg0MiAyLjY1LS40MSA0LjAzMi45NjcgMS4zOCAxLjM3NSAxLjgxNiAzLjE3My45NyA0LjAxNUwxNi4zMTggMjkuNTljLTIuMTIzIDIuMTE2LTQuNjY0IDMuOC03LjU2NSA1LjAxMiIgZmlsbD0iI0ZGRiIvPjxwYXRoIGQ9Ik0yOS40MSA2LjExcy00LjQ1LTIuMzc4LTguMjAyIDUuNzcyYy0xLjczNCAzLjc2Ni00LjM1IDEuNTQ2LTQuMzUgMS41NDYiLz48cGF0aCBkPSJNMzYuNDIgOC44MjVjMCAuNDYzLS4xNC44NzMtLjQzMiAxLjE2NGwtOS4zMzUgOS4zYy4yODItLjI5LjQxLS42NjguNDEtMS4xMiAwLS44NzQtLjUwNy0xLjk2My0xLjQwNi0yLjg2OC0xLjM2Mi0xLjM1OC0zLjE0Ny0xLjgtNC4wMDItLjk5TDMwLjk5IDUuMDFjLjg0NC0uODQgMi42NS0uNDEgNC4wMzUuOTYuODk4LjkwNCAxLjM5NiAxLjk4MiAxLjM5NiAyLjg1NU0xMC41MTUgMzMuNzc0Yy0uNTczLjMwMi0xLjE1Ny41Ny0xLjc2NC44M0w0LjUgMzYuMzgybDEuNzg2LTQuMjM1Yy4yNTgtLjYwNC41My0xLjE4Ni44MzMtMS43NTcuNjkuMTgzIDEuNDQ4LjYyNSAyLjEwOCAxLjI4Mi42Ni42NTggMS4xMDIgMS40MTIgMS4yODcgMi4xMDIiIGZpbGw9IiM0Qzk3RkYiLz48cGF0aCBkPSJNMzYuNDk4IDguNzQ4YzAgLjQ2NC0uMTQuODc0LS40MzMgMS4xNjVsLTE5Ljc0MiAxOS42OGMtMi4xMyAyLjExLTQuNjczIDMuNzkzLTcuNTcyIDUuMDFMNC41IDM2LjM4bC45NzQtMi4zMTYgMS45MjUtLjgwOGMyLjg5OC0xLjIxOCA1LjQ0LTIuOSA3LjU3LTUuMDFsMTkuNzQzLTE5LjY4Yy4yOTItLjI5Mi40MzItLjcwMi40MzItMS4xNjUgMC0uNjQ2LS4yNy0xLjQtLjc4LTIuMTIyLjI1LjE3Mi41LjM3Ny43MzcuNjE0Ljg5OC45MDUgMS4zOTYgMS45ODMgMS4zOTYgMi44NTYiIGZpbGw9IiM1NzVFNzUiIG9wYWNpdHk9Ii4xNSIvPjxwYXRoIGQ9Ik0xOC40NSAxMi44M2MwIC41LS40MDQuOTA1LS45MDQuOTA1cy0uOTA1LS40MDUtLjkwNS0uOTA0YzAtLjUuNDA3LS45MDMuOTA2LS45MDMuNSAwIC45MDQuNDA0LjkwNC45MDR6IiBmaWxsPSIjNTc1RTc1Ii8%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20extension%20%3D%20new%20ExtensionBuilder(%22Pen%2B%22%2C%20%22penP%22%2C%20null%2C%20%7B%0A%20%20%20%20blockIconUri%3A%20blockIco%2C%0A%20%20%20%20menuIconUri%3A%20menuIco%2C%0A%20%20%7D)%3B%0A%20%20extension.internal.JSON.menuIconURI%20%3D%20menuIco%3B%0A%20%20extension.internal.JSON.blockIconURI%20%3D%20blockIco%3B%0A%0A%20%20%2F%2F%3Fsome%20smaller%20optimizations%20just%20store%20the%20multiplacation%20for%20later%0A%20%20const%20f32_4%20%3D%204%20*%20Float32Array.BYTES_PER_ELEMENT%3B%0A%20%20const%20f32_8%20%3D%208%20*%20Float32Array.BYTES_PER_ELEMENT%3B%0A%20%20const%20f32_10%20%3D%2010%20*%20Float32Array.BYTES_PER_ELEMENT%3B%0A%0A%20%20%2F%2F%3FDeclare%20most%20of%20the%20main%20repo's%20we%20are%20going%20to%20use%20around%20the%20scratch%20vm%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20renderer%20%3D%20runtime.renderer%3B%0A%20%20const%20shaderManager%20%3D%20renderer._shaderManager%3B%0A%0A%20%20const%20canvas%20%3D%20renderer.canvas%3B%0A%20%20const%20gl%20%3D%20renderer._gl%3B%0A%20%20let%20currentFilter%20%3D%20gl.NEAREST%3B%0A%0A%20%20let%20allowZbufferMod%20%3D%20false%3B%0A%0A%20%20if%20(!Scratch.vm.extensionManager.isExtensionLoaded(%22pen%22))%20%7B%0A%20%20%20%20runtime.extensionManager.loadExtensionIdSync(%22pen%22)%3B%0A%20%20%7D%0A%0A%20%20const%20checkForPen%20%3D%20(util)%20%3D%3E%20%7B%0A%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20const%20customState%20%3D%20curTarget%5B%22_customState%22%5D%3B%0A%20%20%20%20if%20(!customState%5B%22Scratch.pen%22%5D)%20%7B%0A%20%20%20%20%20%20customState%5B%22Scratch.pen%22%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20penDown%3A%20false%2C%0A%20%20%20%20%20%20%20%20color%3A%2066.66%2C%0A%20%20%20%20%20%20%20%20saturation%3A%20100%2C%0A%20%20%20%20%20%20%20%20brightness%3A%20100%2C%0A%20%20%20%20%20%20%20%20transparency%3A%200%2C%0A%20%20%20%20%20%20%20%20_shade%3A%2050%2C%0A%20%20%20%20%20%20%20%20penAttributes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20color4f%3A%20%5B0%2C%200%2C%201%2C%201%5D%2C%0A%20%20%20%20%20%20%20%20%20%20diameter%3A%201%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20let%20stagePenContext%20%3D%20!Scratch.vm.renderer%5B%22_penSkinId%22%5D%0A%20%20%20%20%3F%20Scratch.vm.renderer.createPenSkin()%0A%20%20%20%20%3A%20renderer%5B%22_penSkinId%22%5D%3B%0A%0A%20%20%2F%2F%3FIf%20no%20pen%20shader%20initilize%20it%20because%20we%20have%20to.%0A%20%20if%20(shaderManager._shaderCache.line.length%20%3D%3D%200)%20%7B%0A%20%20%20%20Scratch.vm.renderer.penLine(%0A%20%20%20%20%20%20Scratch.vm.renderer._penSkinId%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FDefault%20pen%20attributes%0A%20%20%20%20%20%20%20%20color4f%3A%20%5B0%2C%200%2C%201%2C%201%5D%2C%0A%20%20%20%20%20%20%20%20diameter%3A%201%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F*Define%20PEN%2B%20variables%20%3E%3A)%0A%20%20const%20triangleDefaultAttributes%20%3D%20%5B%0A%20%20%20%20%2F%2F%20U%20V%20%20TINT%20R%20G%20B%20%20Z%20W%20transparency%0A%20%20%20%200%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%0A%20%20%5D%3B%0A%0A%20%20const%20triangleAttributesOfAllSprites%20%3D%20%7B%7D%3B%20%2F%2F!it%20dawned%20on%20me%20I%20have%20to%20do%20this%0A%0A%20%20%2F%2F%3FGet%20Shaders%0A%20%20const%20penPlusShaders%20%3D%20%7B%0A%20%20%20%20untextured%3A%20%7B%0A%20%20%20%20%20%20Shaders%3A%20%7B%0A%20%20%20%20%20%20%20%20vert%3A%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attribute%20vec4%20a_position%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attribute%20vec4%20a_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20vec4%20v_color%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20main()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v_color%20%3D%20a_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl_Position%20%3D%20a_position%20*%20vec4(a_position.w%2Ca_position.w%2C1%2C1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%2C%0A%20%20%20%20%20%20%20%20frag%3A%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20highp%20vec4%20v_color%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20main()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl_FragColor%20%3D%20v_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20ProgramInf%3A%20null%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20textured%3A%20%7B%0A%20%20%20%20%20%20Shaders%3A%20%7B%0A%20%20%20%20%20%20%20%20vert%3A%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attribute%20vec4%20a_position%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attribute%20vec4%20a_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20attribute%20vec2%20a_texCoord%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20vec4%20v_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20vec2%20v_texCoord%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20main()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v_color%20%3D%20a_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20v_texCoord%20%3D%20a_texCoord%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl_Position%20%3D%20a_position%20*%20vec4(a_position.w%2Ca_position.w%2C1%2C1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%2C%0A%20%20%20%20%20%20%20%20frag%3A%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uniform%20sampler2D%20u_texture%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20highp%20vec2%20v_texCoord%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20varying%20highp%20vec4%20v_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20main()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl_FragColor%20%3D%20texture2D(u_texture%2C%20v_texCoord)%20*%20v_color%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%60%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20ProgramInf%3A%20null%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20createAndCompileShaders%3A%20(vert%2C%20frag)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%3F%20compile%20vertex%20Shader%0A%20%20%20%20%20%20const%20vertShader%20%3D%20gl.createShader(gl.VERTEX_SHADER)%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20gl.shaderSource(vertShader%2C%20vert.trim())%3B%0A%20%20%20%20%20%20%20%20gl.compileShader(vertShader)%3B%0A%20%20%20%20%20%20%20%20if%20(!gl.getShaderParameter(vertShader%2C%20gl.COMPILE_STATUS))%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20gl.getShaderInfoLog(vertShader)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%3F%20compile%20fragment%20Shader%0A%20%20%20%20%20%20const%20fragShader%20%3D%20gl.createShader(gl.FRAGMENT_SHADER)%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20gl.shaderSource(fragShader%2C%20frag.trim())%3B%0A%20%20%20%20%20%20%20%20gl.compileShader(fragShader)%3B%0A%20%20%20%20%20%20%20%20if%20(!gl.getShaderParameter(fragShader%2C%20gl.COMPILE_STATUS))%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20gl.getShaderInfoLog(fragShader)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%3F%20compile%20program%0A%20%20%20%20%20%20const%20program%20%3D%20gl.createProgram()%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20gl.attachShader(program%2C%20vertShader)%3B%0A%20%20%20%20%20%20%20%20gl.attachShader(program%2C%20fragShader)%3B%0A%20%20%20%20%20%20%20%20gl.linkProgram(program)%3B%0A%20%20%20%20%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.LINK_STATUS))%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20gl.getProgramInfoLog(program)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20gl.validateProgram(program)%3B%0A%20%20%20%20%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.VALIDATE_STATUS))%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20gl.getProgramInfoLog(program)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20program%3A%20program%2C%0A%20%20%20%20%20%20%20%20vert%3A%20vertShader%2C%0A%20%20%20%20%20%20%20%20frag%3A%20fragShader%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%3F%20Create%20program%20info%0A%20%20penPlusShaders.untextured.ProgramInf%20%3D%20penPlusShaders.createAndCompileShaders(%0A%20%20%20%20penPlusShaders.untextured.Shaders.vert%2C%0A%20%20%20%20penPlusShaders.untextured.Shaders.frag%0A%20%20)%3B%0A%20%20penPlusShaders.textured.ProgramInf%20%3D%20penPlusShaders.createAndCompileShaders(%0A%20%20%20%20penPlusShaders.textured.Shaders.vert%2C%0A%20%20%20%20penPlusShaders.textured.Shaders.frag%0A%20%20)%3B%0A%0A%20%20%2F%2F%3FUntextured%0A%20%20const%20a_position_Location_untext%20%3D%20gl.getAttribLocation(%0A%20%20%20%20penPlusShaders.untextured.ProgramInf.program%2C%0A%20%20%20%20%22a_position%22%0A%20%20)%3B%0A%20%20const%20a_color_Location_untext%20%3D%20gl.getAttribLocation(%0A%20%20%20%20penPlusShaders.untextured.ProgramInf.program%2C%0A%20%20%20%20%22a_color%22%0A%20%20)%3B%0A%0A%20%20gl.enableVertexAttribArray(a_position_Location_untext)%3B%0A%20%20gl.enableVertexAttribArray(a_color_Location_untext)%3B%0A%0A%20%20%2F%2F%3FTextured%0A%20%20const%20a_position_Location_text%20%3D%20gl.getAttribLocation(%0A%20%20%20%20penPlusShaders.textured.ProgramInf.program%2C%0A%20%20%20%20%22a_position%22%0A%20%20)%3B%0A%20%20const%20a_color_Location_text%20%3D%20gl.getAttribLocation(%0A%20%20%20%20penPlusShaders.textured.ProgramInf.program%2C%0A%20%20%20%20%22a_color%22%0A%20%20)%3B%0A%20%20const%20a_textCoord_Location_text%20%3D%20gl.getAttribLocation(%0A%20%20%20%20penPlusShaders.textured.ProgramInf.program%2C%0A%20%20%20%20%22a_texCoord%22%0A%20%20)%3B%0A%0A%20%20const%20u_texture_Location_text%20%3D%20gl.getUniformLocation(%0A%20%20%20%20penPlusShaders.textured.ProgramInf.program%2C%0A%20%20%20%20%22u_texture%22%0A%20%20)%3B%0A%0A%20%20gl.enableVertexAttribArray(a_position_Location_text)%3B%0A%20%20gl.enableVertexAttribArray(a_color_Location_text)%3B%0A%20%20gl.enableVertexAttribArray(a_textCoord_Location_text)%3B%0A%0A%20%20const%20vertexBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20vertexBuffer)%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20null)%3B%0A%0A%20%20%2F%2F%3FOverride%20pen%20Clear%20with%20pen%2B%0A%20%20let%20wrapType%20%3D%20gl.CLAMP_TO_EDGE%3B%0A%20%20renderer.penClear%20%3D%20(penSkinID)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2FPen%2B%20Overrides%20default%20pen%20Clearing%0A%20%20%20%20gl.clear(gl.DEPTH_BUFFER_BIT)%3B%0A%20%20%20%20%2F%2F%3F%20%5E%20just%20clear%20the%20depth%20buffer%20for%20when%20its%20added.%0A%0A%20%20%20%20%2F%2FOld%20clearing%0A%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20const%20skin%20%3D%20%2F**%20%40type%20%7BPenSkin%7D%20*%2F%20renderer._allSkins%5BpenSkinID%5D%3B%0A%20%20%20%20skin.clear()%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2Fdefine%20defaults%0A%20%20gl.disable(gl.DEPTH_TEST)%3B%0A%20%20gl.depthFunc(gl.NEVER)%3B%0A%20%20%2F%2Fgl.blendFunc(gl.SRC_ALPHA%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%0A%20%20let%20vertexBufferData%20%3D%20null%3B%0A%20%20let%20texVertexBufferData%20%3D%20null%3B%0A%0A%20%20%2F%2F%3FHave%20this%20here%20for%20ez%20pz%20tri%20drawing%20on%20the%20canvas%0A%20%20const%20drawTri%20%3D%20(curProgram%2C%20x1%2C%20y1%2C%20x2%2C%20y2%2C%20x3%2C%20y3%2C%20penColor%2C%20targetID)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%3F%20get%20triangle%20attributes%20for%20current%20sprite.%0A%20%20%20%20const%20triAttribs%20%3D%20triangleAttributesOfAllSprites%5BtargetID%5D%3B%0A%0A%20%20%20%20if%20(triAttribs)%20%7B%0A%20%20%20%20%20%20vertexBufferData%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20-y1%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B5%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B6%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%20*%20triAttribs%5B2%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%20*%20triAttribs%5B3%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%20*%20triAttribs%5B4%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%20*%20triAttribs%5B9%5D%2C%0A%0A%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20-y2%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B13%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B14%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%20*%20triAttribs%5B10%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%20*%20triAttribs%5B11%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%20*%20triAttribs%5B12%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%20*%20triAttribs%5B15%5D%2C%0A%0A%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20-y3%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B21%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B22%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%20*%20triAttribs%5B18%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%20*%20triAttribs%5B19%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%20*%20triAttribs%5B20%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%20*%20triAttribs%5B23%5D%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20vertexBufferData%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20-y1%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%2C%0A%0A%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20-y2%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%2C%0A%0A%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20-y3%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%20penColor%5B0%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B1%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B2%5D%2C%0A%20%20%20%20%20%20%20%20penColor%5B3%5D%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%3F%20Bind%20Positional%20Data%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20vertexBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20vertexBufferData%2C%20gl.DYNAMIC_DRAW)%3B%0A%0A%20%20%20%20gl.vertexAttribPointer(%0A%20%20%20%20%20%20a_position_Location_untext%2C%0A%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20gl.FLOAT%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20f32_8%2C%0A%20%20%20%20%20%200%0A%20%20%20%20)%3B%0A%20%20%20%20gl.vertexAttribPointer(%0A%20%20%20%20%20%20a_color_Location_untext%2C%0A%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20gl.FLOAT%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20f32_8%2C%0A%20%20%20%20%20%20f32_4%0A%20%20%20%20)%3B%0A%0A%20%20%20%20if%20(curProgram%20!%3D%20penPlusShaders.untextured.ProgramInf.program)%20%7B%0A%20%20%20%20%20%20gl.useProgram(penPlusShaders.untextured.ProgramInf.program)%3B%0A%20%20%20%20%7D%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%203)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20drawTextTri%20%3D%20(%0A%20%20%20%20curProgram%2C%0A%20%20%20%20x1%2C%0A%20%20%20%20y1%2C%0A%20%20%20%20x2%2C%0A%20%20%20%20y2%2C%0A%20%20%20%20x3%2C%0A%20%20%20%20y3%2C%0A%20%20%20%20targetID%2C%0A%20%20%20%20texture%0A%20%20)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%3F%20get%20triangle%20attributes%20for%20current%20sprite.%0A%20%20%20%20const%20triAttribs%20%3D%20triangleAttributesOfAllSprites%5BtargetID%5D%3B%0A%0A%20%20%20%20if%20(triAttribs)%20%7B%0A%20%20%20%20%20%20vertexBufferData%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20-y1%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B5%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B6%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B2%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B3%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B4%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B7%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B0%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B1%5D%2C%0A%0A%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20-y2%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B13%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B14%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B10%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B11%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B12%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B15%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B8%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B9%5D%2C%0A%0A%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20-y3%2C%0A%20%20%20%20%20%20%20%20-triAttribs%5B21%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B22%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B18%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B19%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B20%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B23%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B16%5D%2C%0A%20%20%20%20%20%20%20%20triAttribs%5B17%5D%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20vertexBufferData%20%3D%20new%20Float32Array(%5B%0A%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20-y1%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%0A%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20-y2%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%0A%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20-y3%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%5D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%3F%20Bind%20Positional%20Data%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20vertexBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20vertexBufferData%2C%20gl.DYNAMIC_DRAW)%3B%0A%0A%20%20%20%20gl.vertexAttribPointer(%0A%20%20%20%20%20%20a_position_Location_text%2C%0A%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20gl.FLOAT%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20f32_10%2C%0A%20%20%20%20%20%200%0A%20%20%20%20)%3B%0A%20%20%20%20gl.vertexAttribPointer(%0A%20%20%20%20%20%20a_color_Location_text%2C%0A%20%20%20%20%20%204%2C%0A%20%20%20%20%20%20gl.FLOAT%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20f32_10%2C%0A%20%20%20%20%20%20f32_4%0A%20%20%20%20)%3B%0A%20%20%20%20gl.vertexAttribPointer(%0A%20%20%20%20%20%20a_textCoord_Location_text%2C%0A%20%20%20%20%20%202%2C%0A%20%20%20%20%20%20gl.FLOAT%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20f32_10%2C%0A%20%20%20%20%20%20f32_8%0A%20%20%20%20)%3B%0A%0A%20%20%20%20if%20(curProgram%20!%3D%20penPlusShaders.textured.ProgramInf.program)%20%7B%0A%20%20%20%20%20%20gl.useProgram(penPlusShaders.textured.ProgramInf.program)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(gl.getParameter(gl.TEXTURE_BINDING_2D)%20!%3D%20texture)%20%7B%0A%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20texture)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MIN_FILTER%2C%20currentFilter)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MAG_FILTER%2C%20currentFilter)%3B%0A%20%20%20%20%20%20%2F*gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20wrapType)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20wrapType)%3B*%2F%0A%20%20%20%20%20%20gl.uniform1i(u_texture_Location_text%2C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%203)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20lilPenDabble%20%3D%20(nativeSize%2C%20curTarget%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20checkForPen(util)%3B%0A%0A%20%20%20%20const%20attrib%20%3D%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%3B%0A%0A%20%20%20%20curTarget.runtime.ext_pen.penDown(null%2C%20util)%3B%0A%0A%20%20%20%20renderer.penPoint(%0A%20%20%20%20%20%20Scratch.vm.renderer._penSkinId%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20color4f%3A%20%5B0%2C%200%2C%201%2C%201%5D%2C%0A%20%20%20%20%20%20%20%20diameter%3A%201%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20nativeSize%5B0%5D%2C%0A%20%20%20%20%20%20nativeSize%5B1%5D%0A%20%20%20%20)%3B%0A%0A%20%20%20%20curTarget.runtime.ext_pen.penUp(null%2C%20util)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20setValueAccordingToCase%20%3D%20(%0A%20%20%20%20targetId%2C%0A%20%20%20%20attribute%2C%0A%20%20%20%20value%2C%0A%20%20%20%20wholeTri%2C%0A%20%20%20%20offset%0A%20%20)%20%3D%3E%20%7B%0A%20%20%20%20offset%20%3D%20offset%20%2B%20attribute%20%7C%7C%20attribute%3B%0A%20%20%20%20let%20valuetoSet%20%3D%200%3B%0A%20%20%20%20switch%20(attribute)%20%7B%0A%20%20%20%20%20%20%2F%2FU%0A%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%2F%2FV%0A%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%2F%2F100%20since%20that%20is%20what%20scratch%20users%20are%20accustomed%20to.%0A%20%20%20%20%20%20%2F%2FR%0A%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20Math.min(Math.max(value%2C%200)%2C%20100)%20*%200.01%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%2F%2FG%0A%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20Math.min(Math.max(value%2C%200)%2C%20100)%20*%200.01%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%2F%2FB%0A%20%20%20%20%20%20case%204%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20Math.min(Math.max(value%2C%200)%2C%20100)%20*%200.01%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%2F%2FClamp%20to%200%20so%20we%20can't%20go%20behind%20the%20stage.%0A%20%20%20%20%20%20%2F%2FZ%0A%20%20%20%20%20%20case%205%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%201%20-%20Math.min(Math.max(value%2C%200)%2C%201000)%20%2F%201000%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%2F%2FClamp%20to%201%20so%20we%20don't%20accidentally%20clip.%0A%20%20%20%20%20%20%2F%2FW%0A%20%20%20%20%20%20case%206%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20Math.max(value%2C%201)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%2F%2FTransparency%0A%20%20%20%20%20%20%2F%2FSame%20story%20as%20color%0A%20%20%20%20%20%20case%207%3A%0A%20%20%20%20%20%20%20%20valuetoSet%20%3D%20Math.min(Math.max(value%2C%200)%2C%201000)%20*%200.01%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%2F%2FJust%20break%20if%20value%20isn't%20valid%0A%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2FCheck%20if%20the%20index%20even%20exists.%0A%20%20%20%20if%20(attribute%20%3E%3D%200%20%26%26%20attribute%20%3C%3D%207)%20%7B%0A%20%20%20%20%20%20if%20(wholeTri)%20%7B%0A%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%5Battribute%5D%20%3D%20valuetoSet%3B%0A%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%5Battribute%20%2B%208%5D%20%3D%20valuetoSet%3B%0A%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%5Battribute%20%2B%2016%5D%20%3D%20valuetoSet%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%5Boffset%5D%20%3D%20valuetoSet%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%3F%20Define%20the%20menus%0A%20%20extension.addMenu(%22orderMenu%22%2C%20%5B%22off%22%2C%20%22on%22%5D)%3B%0A%20%20extension.addMenu(%0A%20%20%20%20%22hsvMenu%22%2C%0A%20%20%20%20%5B%22color%22%2C%20%22saturation%22%2C%20%22brightness%22%2C%20%22transparency%22%2C%20%22size%22%5D%2C%0A%20%20%20%20true%0A%20%20)%3B%0A%20%20extension.addMenu(%0A%20%20%20%20%22triAttribute%22%2C%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22U%20value%22%2C%0A%20%20%20%20%20%20%20%20value%3A%200%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22V%20value%22%2C%0A%20%20%20%20%20%20%20%20value%3A%201%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22red%20tint%22%2C%0A%20%20%20%20%20%20%20%20value%3A%202%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22green%20tint%22%2C%0A%20%20%20%20%20%20%20%20value%3A%203%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22blue%20tint%22%2C%0A%20%20%20%20%20%20%20%20value%3A%204%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22transparency%22%2C%0A%20%20%20%20%20%20%20%20value%3A%207%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22corner%20pinch%22%2C%0A%20%20%20%20%20%20%20%20value%3A%206%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%20%20true%0A%20%20)%3B%0A%20%20extension.addMenu(%0A%20%20%20%20%22filterType%22%2C%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22Closest%22%2C%0A%20%20%20%20%20%20%20%20value%3A%20gl.NEAREST%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22Linear%22%2C%0A%20%20%20%20%20%20%20%20value%3A%20gl.LINEAR%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%2C%0A%20%20%20%20true%0A%20%20)%3B%0A%0A%20%20extension.addMenu(%22pointMenu%22%2C%20%5B%221%22%2C%20%222%22%2C%20%223%22%5D%2C%20true)%3B%0A%20%20extension.addMenu(%0A%20%20%20%20%22blendMenu%22%2C%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22additive%22%2C%0A%20%20%20%20%20%20%20%20value%3A%20gl.ONE_MINUS_SRC_ALPHA%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%5D%2C%0A%20%20%20%20true%0A%20%20)%3B%0A%0A%20%20extension.addMenu(%22wrapMenu%22%2C%20%5B%22clamp%22%2C%20%22repeat%22%5D%2C%20true)%3B%0A%0A%20%20%2F%2F%3F%20Seperate%20blocks%20from%20the%20rest%20of%20the%20code%20to%20just%20clean%20up%20the%20workspace%20a%20bit%0A%20%20const%20addBlocks%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20extension.addLabel(%22Made%20by%20ObviousAlexC%22)%3B%0A%20%20%20%20extension.addLabel(%22Warning%20Misc%20Limits%20makes%20this%20lag!%22)%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Pen%20down%3F%22%2C%0A%20%20%20%20%20%20%20%20%22isPenDown%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20(args%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20checkForPen(util)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20return%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penDown%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Pen%20%5BHSV%5D%22%2C%0A%20%20%20%20%20%20%20%20%22getPenHSV%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20(%7B%20HSV%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20checkForPen(util)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(HSV%20%3D%3D%20%22size%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.diameter%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D%5BHSV%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22HSV%22%2C%20%22color%22%2C%20null%2C%20%22hsvMenu%22)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20%2F%2FTODO%20Figure%20out%20Z%20problems%0A%20%20%20%20%2F*%0A%20%20%20%20extension.addBlock(%22Turn%20independent%20triangles%20%5Border%5D%22%2C%22setRenderOrder%22%2CScratch.BlockType.COMMAND%2C(%7Border%7D%2Cutil)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20checkForPen(util)%0A%20%20%20%20%20%20%20%20if%20(order%20%3D%3D%20%22off%22)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.disable(gl.DEPTH_TEST)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.depthFunc(gl.NEVER)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20allowZbufferMod%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.enable(gl.DEPTH_TEST)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.depthFunc(gl.GEQUAL)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20allowZbufferMod%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).addArgument(%22order%22%2C%22off%22%2Cnull%2C%22orderMenu%22)%0A%20%20%20%20*%2F%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Draw%20dot%20at%20%5Bx%5D%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%22drawDot%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20(%7B%20x%2C%20y%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20checkForPen(util)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20const%20attrib%20%3D%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%3B%0A%0A%20%20%20%20%20%20%20%20%20%20curTarget.runtime.ext_pen.penDown(null%2C%20util)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20Scratch.vm.renderer.penPoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20Scratch.vm.renderer._penSkinId%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attrib%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20curTarget.runtime.ext_pen.penUp(null%2C%20util)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22x%22%2C%200).addArgument(%22y%22%2C%200)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Draw%20line%20from%20%5Bx1%5D%20%5By1%5D%20to%20%5Bx2%5D%20%5By2%5D%22%2C%0A%20%20%20%20%20%20%20%20%22drawLine%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20(%7B%20x1%2C%20y1%2C%20x2%2C%20y2%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20checkForPen(util)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20const%20attrib%20%3D%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%3B%0A%0A%20%20%20%20%20%20%20%20%20%20curTarget.runtime.ext_pen.penDown(null%2C%20util)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20Scratch.vm.renderer.penLine(%0A%20%20%20%20%20%20%20%20%20%20%20%20Scratch.vm.renderer._penSkinId%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attrib%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y2%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20curTarget.runtime.ext_pen.penUp(null%2C%20util)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22x1%22%2C%200).addArgument(%22y1%22%2C%200).addArgument(%22x2%22%2C%2010).addArgument(%22y2%22%2C%2010)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%22Stamp%20pen%20square%22%2C%0A%20%20%20%20%20%20%22squareDown%22%2C%0A%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20(arg%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2FJust%20a%20simple%20thing%20to%20allow%20for%20pen%20drawing%0A%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%0A%20%20%20%20%20%20%20%20const%20attrib%20%3D%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%3B%0A%20%20%20%20%20%20%20%20const%20diam%20%3D%20attrib.diameter%3B%0A%0A%20%20%20%20%20%20%20%20const%20nativeSize%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5Bcanvas.width%2C%20canvas.height%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20renderer._nativeSize%3B%0A%0A%20%20%20%20%20%20%20%20lilPenDabble(nativeSize%2C%20curTarget%2C%20util)%3B%20%2F%2F%20Do%20this%20so%20the%20renderer%20doesn't%20scream%20at%20us%0A%0A%20%20%20%20%20%20%20%20if%20(!allowZbufferMod%20%26%26%20triangleAttributesOfAllSprites%5B%22squareStamp%22%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B13%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B21%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2Ftrying%20my%20best%20to%20reduce%20memory%20usage%0A%20%20%20%20%20%20%20%20gl.viewport(0%2C%200%2C%20nativeSize%5B0%5D%2C%20nativeSize%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20const%20dWidth%20%3D%201%20%2F%20nativeSize%5B0%5D%3B%0A%20%20%20%20%20%20%20%20const%20dHeight%20%3D%201%20%2F%20nativeSize%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20const%20spritex%20%3D%20curTarget.x%3B%0A%20%20%20%20%20%20%20%20const%20spritey%20%3D%20curTarget.y%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2Fcorrection%20for%20HQ%20pen%0A%20%20%20%20%20%20%20%20const%20typSize%20%3D%20renderer._nativeSize%3B%0A%20%20%20%20%20%20%20%20const%20mul%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%3F%202%20*%20((canvas.width%20%2B%20canvas.height)%20%2F%20(typSize%5B0%5D%20%2B%20typSize%5B1%5D))%0A%20%20%20%20%20%20%20%20%20%20%3A%202%3B%0A%20%20%20%20%20%20%20%20%2F%2FParatheses%20because%20I%20know%20some%20obscure%20browser%20will%20screw%20this%20up.%0A%20%20%20%20%20%20%20%20let%20x1%20%3D%20Scratch.Cast.toNumber(spritex%20-%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20let%20x2%20%3D%20Scratch.Cast.toNumber(spritex%20%2B%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20let%20x3%20%3D%20Scratch.Cast.toNumber(spritex%20%2B%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20let%20y1%20%3D%20Scratch.Cast.toNumber(spritey%20%2B%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20let%20y2%20%3D%20Scratch.Cast.toNumber(spritey%20%2B%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20let%20y3%20%3D%20Scratch.Cast.toNumber(spritey%20-%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20drawTri(%0A%20%20%20%20%20%20%20%20%20%20gl.getParameter(gl.CURRENT_PROGRAM)%2C%0A%20%20%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20y1%2C%0A%20%20%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20%20%20y2%2C%0A%20%20%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20%20%20y3%2C%0A%20%20%20%20%20%20%20%20%20%20attrib.color4f%2C%0A%20%20%20%20%20%20%20%20%20%20%22squareStamp%22%0A%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20x1%20%3D%20Scratch.Cast.toNumber(spritex%20-%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20x2%20%3D%20Scratch.Cast.toNumber(spritex%20-%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20x3%20%3D%20Scratch.Cast.toNumber(spritex%20%2B%200.5%20*%20diam)%20*%20dWidth%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20y1%20%3D%20Scratch.Cast.toNumber(spritey%20%2B%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20y2%20%3D%20Scratch.Cast.toNumber(spritey%20-%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20y3%20%3D%20Scratch.Cast.toNumber(spritey%20-%200.5%20*%20diam)%20*%20dHeight%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20drawTri(%0A%20%20%20%20%20%20%20%20%20%20gl.getParameter(gl.CURRENT_PROGRAM)%2C%0A%20%20%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20y1%2C%0A%20%20%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20%20%20y2%2C%0A%20%20%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20%20%20y3%2C%0A%20%20%20%20%20%20%20%20%20%20attrib.color4f%2C%0A%20%20%20%20%20%20%20%20%20%20%22squareStamp%22%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%3B%0A%0A%20%20%20%20extension.addLabel(%22Triangle%20Blocks%22)%3B%0A%20%20%20%20extension.addLabel(%22Textures%20Must%20be%20a%20bitmap!%22)%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%22Set%20triangle%20filter%20mode%20to%20%5Bfilter%5D%22%2C%0A%20%20%20%20%20%20%22setTriangleFilterMode%22%2C%0A%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20(%7B%20filter%20%7D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20currentFilter%20%3D%20filter%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20).addArgument(%22filter%22%2C%20gl.NEAREST%2C%20null%2C%20%22filterType%22)%0A%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Set%20triangle%20point%20%5Bpoint%5D's%20%5Battribute%5D%20to%20%5Bvalue%5D%22%2C%0A%20%20%20%20%20%20%20%20%22setTrianglePointAttribute%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20(%7B%20point%2C%20attribute%2C%20value%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20trianglePointStart%20%3D%20(point%20-%201)%20*%208%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20targetId%20%3D%20util.target.id%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!triangleAttributesOfAllSprites%5BtargetId%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20triangleDefaultAttributes%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20setValueAccordingToCase(%0A%20%20%20%20%20%20%20%20%20%20%20%20targetId%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attribute%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20trianglePointStart%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22point%22%2C%20%221%22%2C%20null%2C%20%22pointMenu%22).addArgument(%22attribute%22%2C%202%2C%20null%2C%20%22triAttribute%22).addArgument(%22value%22%2C%201)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Get%20triangle%20point%20%5Bpoint%5D's%20%5Battribute%5D%22%2C%0A%20%20%20%20%20%20%20%20%22getTrianglePointAttribute%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20(%7B%20point%2C%20attribute%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20trianglePointStart%20%3D%20(point%20-%201)%20*%208%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20targetId%20%3D%20util.target.id%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(!triangleAttributesOfAllSprites%5BtargetId%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20triangleDefaultAttributes%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20let%20value%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BtargetId%5D%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20trianglePointStart%20%2B%20attribute%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20((attribute%20%3E%3D%202%20%26%26%20attribute%20%3C%3D%204)%20%7C%7C%20attribute%20%3D%3D%207)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20*%3D%20100%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22point%22%2C%20%221%22%2C%20null%2C%20%22pointMenu%22).addArgument(%22attribute%22%2C%202%2C%20null%2C%20%22triAttribute%22).addArgument(%22value%22%2C%201)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Draw%20triangle%20between%20%5Bx1%5D%20%5By1%5D%2C%20%5Bx2%5D%20%5By2%5D%20and%20%5Bx3%5D%20%5By3%5D%22%2C%0A%20%20%20%20%20%20%20%20%22drawSolidTri%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20(%7B%20x1%2C%20y1%2C%20x2%2C%20y2%2C%20x3%2C%20y3%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20checkForPen(util)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20attrib%20%3D%20curTarget%5B%22_customState%22%5D%5B%22Scratch.pen%22%5D.penAttributes%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20nativeSize%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%5Bcanvas.width%2C%20canvas.height%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20renderer._nativeSize%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20!allowZbufferMod%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B13%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B21%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%3FRenderer%20Freaks%20out%20if%20we%20don't%20do%20this%20so%20do%20it.%0A%20%20%20%20%20%20%20%20%20%20lilPenDabble(nativeSize%2C%20curTarget%2C%20util)%3B%20%2F%2F%20Do%20this%20so%20the%20renderer%20doesn't%20scream%20at%20us%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2Ftrying%20my%20best%20to%20reduce%20memory%20usage%0A%20%20%20%20%20%20%20%20%20%20gl.viewport(0%2C%200%2C%20nativeSize%5B0%5D%2C%20nativeSize%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dWidth%20%3D%201%20%2F%20nativeSize%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dHeight%20%3D%201%20%2F%20nativeSize%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fcorrection%20for%20HQ%20pen%0A%20%20%20%20%20%20%20%20%20%20const%20typSize%20%3D%20renderer._nativeSize%3B%0A%20%20%20%20%20%20%20%20%20%20const%20mul%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%202%20*%20((canvas.width%20%2B%20canvas.height)%20%2F%20(typSize%5B0%5D%20%2B%20typSize%5B1%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FParatheses%20because%20I%20know%20some%20obscure%20browser%20will%20screw%20this%20up.%0A%20%20%20%20%20%20%20%20%20%20x1%20%3D%20Scratch.Cast.toNumber(x1)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20x2%20%3D%20Scratch.Cast.toNumber(x2)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20x3%20%3D%20Scratch.Cast.toNumber(x3)%20*%20dWidth%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20%20%20y1%20%3D%20Scratch.Cast.toNumber(y1)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20y2%20%3D%20Scratch.Cast.toNumber(y2)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20y3%20%3D%20Scratch.Cast.toNumber(y3)%20*%20dHeight%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20%20%20drawTri(%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.getParameter(gl.CURRENT_PROGRAM)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20attrib.color4f%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20curTarget.id%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22x1%22%2C%200).addArgument(%22y1%22%2C%200).addArgument(%22x2%22%2C%2010).addArgument(%22y2%22%2C%2010).addArgument(%22x3%22%2C%2010).addArgument(%22y3%22%2C%200)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20extension.addBlock(%0A%20%20%20%20%20%20%20%20%22Draw%20textured%20triangle%20between%20%5Bx1%5D%20%5By1%5D%2C%20%5Bx2%5D%20%5By2%5D%20and%20%5Bx3%5D%20%5By3%5D%20with%20the%20texture%20%5Btex%5D%22%2C%0A%20%20%20%20%20%20%20%20%22drawTexTri%22%2C%0A%20%20%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20(%7B%20x1%2C%20y1%2C%20x2%2C%20y2%2C%20x3%2C%20y3%2C%20tex%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20%20%20const%20costIndex%20%3D%20curTarget.getCostumeIndexByName(%0A%20%20%20%20%20%20%20%20%20%20%20%20Scratch.Cast.toString(tex)%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20curCostume%20%3D%20curTarget.sprite.costumes_%5BcostIndex%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(costIndex%20!%3D%20curTarget.currentCostume)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20curTarget.setCostume(costIndex)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20const%20currentTexture%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer._allSkins%5BcurCostume.skinId%5D.getTexture()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20nativeSize%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%5Bcanvas.width%2C%20canvas.height%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20renderer._nativeSize%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%3FRenderer%20Freaks%20out%20if%20we%20don't%20do%20this%20so%20do%20it.%0A%20%20%20%20%20%20%20%20%20%20lilPenDabble(nativeSize%2C%20curTarget%2C%20util)%3B%20%2F%2F%20Do%20this%20so%20the%20renderer%20doesn't%20scream%20at%20us%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20!allowZbufferMod%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B13%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangleAttributesOfAllSprites%5BcurTarget.id%5D%5B21%5D%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2Ftrying%20my%20best%20to%20reduce%20memory%20usage%0A%20%20%20%20%20%20%20%20%20%20gl.viewport(0%2C%200%2C%20nativeSize%5B0%5D%2C%20nativeSize%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dWidth%20%3D%201%20%2F%20nativeSize%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20dHeight%20%3D%201%20%2F%20nativeSize%5B1%5D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2Fcorrection%20for%20HQ%20pen%0A%20%20%20%20%20%20%20%20%20%20const%20typSize%20%3D%20renderer._nativeSize%3B%0A%20%20%20%20%20%20%20%20%20%20const%20mul%20%3D%20renderer.useHighQualityRender%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%202%20*%20((canvas.width%20%2B%20canvas.height)%20%2F%20(typSize%5B0%5D%20%2B%20typSize%5B1%5D))%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%202%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2FParatheses%20because%20I%20know%20some%20obscure%20browser%20will%20screw%20this%20up.%0A%20%20%20%20%20%20%20%20%20%20x1%20%3D%20Scratch.Cast.toNumber(x1)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20x2%20%3D%20Scratch.Cast.toNumber(x2)%20*%20dWidth%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20x3%20%3D%20Scratch.Cast.toNumber(x3)%20*%20dWidth%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20%20%20y1%20%3D%20Scratch.Cast.toNumber(y1)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20y2%20%3D%20Scratch.Cast.toNumber(y2)%20*%20dHeight%20*%20mul%3B%0A%20%20%20%20%20%20%20%20%20%20y3%20%3D%20Scratch.Cast.toNumber(y3)%20*%20dHeight%20*%20mul%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(currentTexture%20!%3D%20null%20%26%26%20typeof%20currentTexture%20!%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20drawTextTri(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20gl.getParameter(gl.CURRENT_PROGRAM)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20curTarget.id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentTexture%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20).addArgument(%22x1%22%2C%200).addArgument(%22y1%22%2C%200).addArgument(%22x2%22%2C%2010).addArgument(%22y2%22%2C%2010).addArgument(%22x3%22%2C%2010).addArgument(%22y3%22%2C%200).addArgument(%22tex%22%2C%20null%2C%20Scratch.ArgumentType.COSTUME)%0A%20%20%20%20%20%20.setFilter()%3B%0A%0A%20%20%20%20%2F*extension.addBlock(%0A%20%20%20%20%20%20%22Set%20%5Btex%5D's%20wrap%20mode%20to%20%5BwrapMode%5D%22%2C%0A%20%20%20%20%20%20%22setWrapMode%22%2C%0A%20%20%20%20%20%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20(%7B%20tex%20%2C%20wrapMode%20%7D%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20util.target%3B%0A%20%20%20%20%20%20%20%20const%20curCostume%20%3D%20curTarget.sprite.costumes_%5B%0A%20%20%20%20%20%20%20%20%20%20curTarget.getCostumeIndexByName(Scratch.Cast.toString(tex))%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20const%20currentTexture%20%3D%20renderer._allSkins%5BcurCostume.skinId%5D._texture%3B%0A%0A%20%20%20%20%20%20%20%20if%20(currentTexture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(gl.getParameter(gl.TEXTURE_BINDING_2D)%20!%3D%20currentTexture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20currentTexture)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(wrapMode%20%3D%3D%20%22clamp%22)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wrapType%20%3D%20gl.CLAMP_TO_EDGE%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wrapType%20%3D%20gl.REPEAT%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%0A%20%20%20%20.addArgument(%22tex%22%2C%20null%2C%20Scratch.ArgumentType.COSTUME)%0A%20%20%20%20.addArgument(%22wrapMode%22%2C%20null%2C%20Scratch.ArgumentType.STRING%2C%20%22wrapMenu%22)%0A%20%20%20%20.setFilter()%3B*%2F%0A%20%20%7D%3B%0A%0A%20%20addBlocks()%3B%0A%0A%20%20%2F%2F%3F%20A%20small%20hack%20to%20stop%20the%20renderer%20from%20immediatly%20dying.%0A%20%20Scratch.vm.renderer.penLine(%0A%20%20%20%20Scratch.vm.renderer._penSkinId%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20color4f%3A%20%5B0%2C%200%2C%201%2C%201%5D%2C%0A%20%20%20%20%20%20diameter%3A%201%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%200%2C%0A%20%20%20%200%2C%0A%20%20%20%200%2C%0A%20%20%20%200%0A%20%20)%3B%0A%20%20extension.register()%3B%0A%7D)(window.Scratch)%3B%0A","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0D%0A%20%20'use%20strict'%3B%0D%0A%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0D%0A%20%20%20%20throw%20new%20Error('pointerlock%20extension%20must%20be%20run%20unsandboxed')%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%0D%0A%20%20const%20canvas%20%3D%20vm.runtime.renderer.canvas%3B%0D%0A%20%20const%20mouse%20%3D%20vm.runtime.ioDevices.mouse%3B%0D%0A%20%20let%20isLocked%20%3D%20false%3B%0D%0A%20%20let%20isPointerLockEnabled%20%3D%20false%3B%0D%0A%0D%0A%20%20let%20rect%20%3D%20canvas.getBoundingClientRect()%3B%0D%0A%20%20window.addEventListener('resize'%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20rect%20%3D%20canvas.getBoundingClientRect()%3B%0D%0A%20%20%7D)%3B%0D%0A%0D%0A%20%20const%20postMouseData%20%3D%20(e%2C%20isDown)%20%3D%3E%20%7B%0D%0A%20%20%20%20const%20%7BmovementX%2C%20movementY%7D%20%3D%20e%3B%0D%0A%20%20%20%20const%20%7Bwidth%2C%20height%7D%20%3D%20rect%3B%0D%0A%20%20%20%20const%20x%20%3D%20mouse._clientX%20%2B%20movementX%3B%0D%0A%20%20%20%20const%20y%20%3D%20mouse._clientY%20-%20movementY%3B%0D%0A%20%20%20%20mouse._clientX%20%3D%20x%3B%0D%0A%20%20%20%20mouse._scratchX%20%3D%20mouse.runtime.stageWidth%20*%20((x%20%2F%20width)%20-%200.5)%3B%0D%0A%20%20%20%20mouse._clientY%20%3D%20y%3B%0D%0A%20%20%20%20mouse._scratchY%20%3D%20mouse.runtime.stageWidth%20*%20((y%20%2F%20height)%20-%200.5)%3B%0D%0A%20%20%20%20if%20(typeof%20isDown%20%3D%3D%3D%20'boolean')%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20button%3A%20e.button%2C%0D%0A%20%20%20%20%20%20%20%20isDown%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20originalPostIOData(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20mouseDevice%20%3D%20vm.runtime.ioDevices.mouse%3B%0D%0A%20%20const%20originalPostIOData%20%3D%20mouseDevice.postData.bind(mouseDevice)%3B%0D%0A%20%20mouseDevice.postData%20%3D%20(data)%20%3D%3E%20%7B%0D%0A%20%20%20%20if%20(!isPointerLockEnabled)%20%7B%0D%0A%20%20%20%20%20%20return%20originalPostIOData(data)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20document.addEventListener('mousedown'%2C%20e%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20if%20(canvas.contains(e.target))%20%7B%0D%0A%20%20%20%20%20%20if%20(isLocked)%20%7B%0D%0A%20%20%20%20%20%20%20%20postMouseData(e%2C%20true)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(isPointerLockEnabled)%20%7B%0D%0A%20%20%20%20%20%20%20%20canvas.requestPointerLock()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%2C%20true)%3B%0D%0A%20%20document.addEventListener('mouseup'%2C%20e%20%3D%3E%20%7B%0D%0A%20%20%20%20if%20(isLocked)%20%7B%0D%0A%20%20%20%20%20%20postMouseData(e%2C%20false)%3B%0D%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%7D%20else%20if%20(isPointerLockEnabled%20%26%26%20canvas.contains(e.target))%20%7B%0D%0A%20%20%20%20%20%20canvas.requestPointerLock()%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%2C%20true)%3B%0D%0A%20%20document.addEventListener('mousemove'%2C%20e%20%3D%3E%20%7B%0D%0A%20%20%20%20if%20(isLocked)%20%7B%0D%0A%20%20%20%20%20%20postMouseData(e)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%2C%20true)%3B%0D%0A%0D%0A%20%20document.addEventListener('pointerlockchange'%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20isLocked%20%3D%20document.pointerLockElement%20%3D%3D%3D%20canvas%3B%0D%0A%20%20%7D)%3B%0D%0A%20%20document.addEventListener('pointerlockerror'%2C%20e%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20eslint-disable-next-line%20no-console%0D%0A%20%20%20%20console.error('Pointer%20lock%20error'%2C%20e)%3B%0D%0A%20%20%7D)%3B%0D%0A%0D%0A%20%20const%20oldStep%20%3D%20vm.runtime._step%3B%0D%0A%20%20vm.runtime._step%20%3D%20function%20(...args)%20%7B%0D%0A%20%20%20%20const%20ret%20%3D%20oldStep.call(this%2C%20...args)%3B%0D%0A%20%20%20%20if%20(isPointerLockEnabled)%20%7B%0D%0A%20%20%20%20%20%20const%20%7Bwidth%2C%20height%7D%20%3D%20rect%3B%0D%0A%20%20%20%20%20%20mouse._clientX%20%3D%20width%20%2F%202%3B%0D%0A%20%20%20%20%20%20mouse._clientY%20%3D%20height%20%2F%202%3B%0D%0A%20%20%20%20%20%20mouse._scratchX%20%3D%200%3B%0D%0A%20%20%20%20%20%20mouse._scratchY%20%3D%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20return%20ret%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20class%20Pointerlock%20%7B%0D%0A%20%20%20%20getInfo%20()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20'pointerlock'%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20'Pointerlock'%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setLocked'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20pointer%20lock%20%5Benabled%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20enabled%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'true'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'enabled'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isLocked'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20pointer%20locked%3F'%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20enabled%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'enabled'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'true'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'disabled'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'false'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setLocked%20(args)%20%7B%0D%0A%20%20%20%20%20%20isPointerLockEnabled%20%3D%20args.enabled%20%3D%3D%3D%20'true'%3B%0D%0A%20%20%20%20%20%20if%20(!isPointerLockEnabled%20%26%26%20isLocked)%20%7B%0D%0A%20%20%20%20%20%20%20%20document.exitPointerLock()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20isLocked%20()%20%7B%0D%0A%20%20%20%20%20%20return%20isLocked%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20Pointerlock())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function%20(Scratch)%20%7B%0D%0A%20%20'use%20strict'%3B%0D%0A%0D%0A%20%20class%20CommentBlocks%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20'lmscomments'%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20'Comment%20Blocks'%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20'%23e4db8c'%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20'%23c6be79'%2C%0D%0A%20%20%20%20%20%20%20%20color3%3A%20'%23a8a167'%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'commentHat'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%2F%2F%20%5BCOMMENT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'comment'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'commentCommand'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%2F%2F%20%5BCOMMENT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'comment'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'commentReporter'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BINPUT%5D%20%2F%2F%20%5BCOMMENT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'comment'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20''%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'commentBoolean'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BINPUT%5D%20%2F%2F%20%5BCOMMENT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COMMENT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'comment'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20commentHat%20()%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20no-op%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20commentCommand%20()%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20no-op%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20commentReporter%20(args)%20%7B%0D%0A%20%20%20%20%20%20return%20args.INPUT%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20commentBoolean%20(args)%20%7B%0D%0A%20%20%20%20%20%20return%20args.INPUT%20%7C%7C%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%20%20Scratch.extensions.register(new%20CommentBlocks())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0D%0A%20%20'use%20strict'%3B%0D%0A%20%20%2F*%0D%0A%20%20*%20JSON%20extension%20v2.5%20by%20skyhigh173%20(English%20Version)%0D%0A%20%20*%20Do%20not%20remove%20this%20comment%0D%0A%20%20*%2F%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20hasOwn%20%3D%20(obj%2C%20property)%20%3D%3E%20Object.prototype.hasOwnProperty.call(obj%2C%20property)%3B%0D%0A%0D%0A%20%20const%20makeLabel%20%3D%20(text)%20%3D%3E%20(%7B%0D%0A%20%20%20%20blockType%3A%20'label'%2C%0D%0A%20%20%20%20text%3A%20text%0D%0A%20%20%7D)%3B%0D%0A%0D%0A%20%20class%20JSONS%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20'skyhigh173JSON'%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20'JSON'%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20'%233271D0'%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20makeLabel('General%20Utils')%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_is_valid'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20JSON%20%5Bjson%5D%20valid'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_is'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20%5Bjson%5D%20%5Btypes%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20types%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'types'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_get_all'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20all%20%5BStype%5D%20of%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Stype%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'get_all'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%2C%22key2%22%3A%22value2%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_new'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'new%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Object'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'types'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_has_key'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5Bjson%5D%20contains%20key%20%5Bkey%5D%3F'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'key2'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_has_value'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5Bjson%5D%20contains%20value%20%5Bvalue%5D%3F'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'scratch'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22TurboWarp%22%2C%22scratch%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_equal'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5Bjson1%5D%20%5Bequal%5D%20%5Bjson2%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json1%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22a%22%3A0%2C%22b%22%3A1%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22b%22%3A1%2C%22a%22%3A0%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20equal%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%3D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'equal'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20makeLabel('JSON%20Strings')%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_jlength'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'length%20of%20json%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%2C%22key2%22%3A%22value2%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_get'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20%5Bitem%5D%20in%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'key'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_set'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20%5Bitem%5D%20to%20%5Bvalue%5D%20in%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'key'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'new%20value'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_delete'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'delete%20%5Bitem%5D%20in%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'key2'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%7B%22key%22%3A%22value%22%2C%22key2%22%3A%22value2%22%7D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20makeLabel('Array')%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_length'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'length%20of%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B1%2C2%2C3%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_get'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'item%20%5Bitem%5D%20of%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22scratch%22%2C%22TurboWarp%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_push'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'add%20%5Bitem%5D%20to%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'TurboWarp'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22scratch%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_set'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'replace%20item%20%5Bpos%5D%20of%20%5Bjson%5D%20to%20%5Bitem%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'fav'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22love%22%2C%22heart%22%2C%22follow%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_insert'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'insert%20%5Bitem%5D%20at%20%5Bpos%5D%20of%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'fav'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22love%22%2C%22follow%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_delete'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'delete%20item%20%5Bitem%5D%20of%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22scratch%22%2C%22a%22%2C%22TurboWarp%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_remove_all'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'delete%20all%20%5Bitem%5D%20in%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'a'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22scratch%22%2C%22a%22%2C%22TurboWarp%22%2C%22a%22%2C%22a%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_itemH'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'item%20%23%20of%20%5Bitem%5D%20in%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'scratch'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22scratch%22%2C%22TurboWarp%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20makeLabel('Advanced')%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_from'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'array%20from%20text%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'abcd'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_fromto'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'array%20%5Bjson%5D%20from%20item%20%5Bitem%5D%20to%20%5Bitem2%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B1%2C2%2C3%2C4%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20item2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_reverse'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'reverse%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22a%22%2C%22b%22%2C%22c%22%2C%22d%22%2C%22e%22%2C%22f%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_flat'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'flat%20array%20%5Bjson%5D%20by%20depth%20%5Bdepth%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%5B1%5D%2C2%2C%5B3%2C4%5D%2C%5B5%2C%5B6%5D%5D%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_concat'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'array%20concat%20%5Bjson%5D%20%5Bjson2%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22a%22%2C%22b%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22c%22%2C%22d%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_filter'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20all%20value%20with%20key%20%5Bkey%5D%20in%20array%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20key%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'id'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%7B%22id%22%3A12%7D%2C%7B%22id%22%3A24%7D%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_setlen'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20length%20of%20array%20%5Bjson%5D%20to%20%5Blen%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22a%22%2C%22b%22%2C%22c%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20len%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_create'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'create%20array%20by%20%5Btext%5D%20with%20delimiter%20%5Bd%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'a%2Cb%2Cc'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%2C'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_array_join'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'join%20string%20by%20array%20%5Bjson%5D%20with%20delimiter%20%5Bd%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22a%22%2C%22b%22%2C%22c%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%2C'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20makeLabel('Lists')%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_vm_getlist'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20list%20%5Blist%5D%20as%20array'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20list%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'get_list'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'json_vm_setlist'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20list%20%5Blist%5D%20to%20content%20%5Bjson%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20list%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'get_list'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%5B%22apple%22%2C%22banana%22%5D'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20get_all%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'keys'%2C'values'%2C'datas'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20get_list%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20'getLists'%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20types%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'Object'%2C%20'Array'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20equal%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'%3D'%2C'%E2%89%A0'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getLists%20()%20%7B%0D%0A%20%20%20%20%20%20const%20globalLists%20%3D%20Object.values(vm.runtime.getTargetForStage().variables).filter(x%20%3D%3E%20x.type%20%3D%3D%20'list')%3B%0D%0A%20%20%20%20%20%20const%20localLists%20%3D%20Object.values(vm.editingTarget.variables).filter(x%20%3D%3E%20x.type%20%3D%3D%20'list')%3B%0D%0A%20%20%20%20%20%20const%20uniqueLists%20%3D%20%5B...new%20Set(%5B...globalLists%2C%20...localLists%5D)%5D%3B%0D%0A%20%20%20%20%20%20if%20(uniqueLists.length%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'select%20a%20list'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'select%20a%20list'%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20uniqueLists.map(i%20%3D%3E%20(%7B%0D%0A%20%20%20%20%20%20%20%20text%3A%20i.name%2C%0D%0A%20%20%20%20%20%20%20%20value%3A%20i.id%0D%0A%20%20%20%20%20%20%7D))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20lookupList(list%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20byId%20%3D%20util.target.lookupVariableById(list)%3B%0D%0A%20%20%20%20%20%20if%20(byId%20%26%26%20byId.type%20%3D%3D%3D%20'list')%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20byId%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20const%20byName%20%3D%20util.target.lookupVariableByNameAndType(list%2C%20'list')%3B%0D%0A%20%20%20%20%20%20if%20(byName)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20byName%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20null%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_is_valid(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20if%20(typeof%20json%20!%3D%20'string')%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20((json.slice(0%2C1)%20!%3D%20'%5B'%20%7C%7C%20json.slice(-1)%20!%3D%20'%5D')%20%26%26%20(json.slice(0%2C1)%20!%3D%20'%7B'%20%7C%7C%20json.slice(-1)%20!%3D%20'%7D'))%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20return%20object%20if%20its%20json%20else%20string%0D%0A%20%20%20%20json_valid_return(json)%7B%0D%0A%20%20%20%20%20%20if%20(typeof%20json%20!%3D%20'string')%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20json%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20((json.slice(0%2C1)%20!%3D%20'%5B'%20%7C%7C%20json.slice(-1)%20!%3D%20'%5D')%20%26%26%20(json.slice(0%2C1)%20!%3D%20'%7B'%20%7C%7C%20json.slice(-1)%20!%3D%20'%7D'))%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20json%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20json%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_is(%7B%20json%2C%20types%20%7D)%20%7B%0D%0A%20%20%20%20%20%20if%20(!this.json_is_valid(%7Bjson%3A%20json%7D))%20return%20false%3B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20switch%20(types)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20'Object'%3A%20return%20!Array.isArray(json)%3B%0D%0A%20%20%20%20%20%20%20%20case%20'Array'%3A%20return%20Array.isArray(json)%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%20return%20false%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_length(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20return%20Object.keys(json).length%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20'%20'%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_new(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20switch%20(json)%20%7B%0D%0A%20%20%20%20%20%20case%20'Object'%3A%20return%20'%7B%7D'%3B%0D%0A%20%20%20%20%20%20case%20'Array'%3A%20return%20'%5B%5D'%3B%0D%0A%20%20%20%20%20%20default%3A%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_has_key(%7B%20json%2C%20key%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20this._fixInvalidJSONValues(this.json_valid_return(key))%20in%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_has_value(%7B%20json%2C%20value%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20value%20%3D%20this.json_valid_return(value)%3B%0D%0A%20%20%20%20%20%20%20%20return%20json.includes(value)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_equal(%7B%20json1%2C%20equal%2C%20json2%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json1%20%3D%20JSON.parse(json1)%3B%0D%0A%20%20%20%20%20%20%20%20json2%20%3D%20JSON.parse(json2)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20keys1%20%3D%20Object.keys(json1)%3B%0D%0A%20%20%20%20%20%20%20%20const%20keys2%20%3D%20Object.keys(json2)%3B%0D%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20keys1.length%20%3D%3D%3D%20keys2.length%20%26%26%20Object.keys(json1).every(key%3D%3Ejson1%5Bkey%5D%20%3D%3D%3D%20json2%5Bkey%5D)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(equal%20%3D%3D%3D%20'%3D')%20return%20result%3B%0D%0A%20%20%20%20%20%20%20%20if%20(equal%20%3D%3D%3D%20'%E2%89%A0')%20return%20!result%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20ignore%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%0D%0A%20%20%20%20json_get_all(%7B%20Stype%2Cjson%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20switch%20(Stype)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20'keys'%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(Object.keys(json).map(key%20%3D%3E%20key))%3B%0D%0A%20%20%20%20%20%20%20%20case%20'values'%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(Object.keys(json).map(key%20%3D%3E%20json%5Bkey%5D))%3B%0D%0A%20%20%20%20%20%20%20%20case%20'datas'%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(Object.keys(json).map(key%20%3D%3E%20%5Bkey%2C%20json%5Bkey%5D%5D))%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%20return%20''%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_get(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(hasOwn(json%2C%20item))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20result%20%3D%20json%5Bitem%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(typeof%20result%20%3D%3D%3D%20'object')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(result)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20ignore%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_fixInvalidJSONValues(value)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20JSON%20does%20not%20support%20these%20values%2C%20so%20convert%20to%20string.%0D%0A%20%20%20%20%20%20if%20(Number.isNaN(value))%20return%20'NaN'%3B%0D%0A%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20Infinity)%20return%20'Infinity'%3B%0D%0A%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20-Infinity)%20return%20'-Infinity'%3B%0D%0A%20%20%20%20%20%20return%20value%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_set(%7B%20item%2C%20value%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20value%20%3D%20this.json_valid_return(value)%3B%0D%0A%20%20%20%20%20%20%20%20value%20%3D%20this._fixInvalidJSONValues(value)%3B%0D%0A%20%20%20%20%20%20%20%20json%5Bitem%5D%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_delete(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20delete%20json%5Bitem%5D%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_jlength(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20same%20function%0D%0A%20%20%20%20%20%20return%20this.json_length(%7B%20json%3A%20json%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_get(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%201...length%20%3A%20array%20content%2C%20-1...-length%20%3A%20reverse%20array%20content%2C%200%20%3A%20ERROR%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20item%20%3D%20Scratch.Cast.toNumber(item)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(item%20%3D%3D%200)%20return%20''%3B%0D%0A%20%20%20%20%20%20%20%20if%20(item%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20item--%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20let%20result%3B%0D%0A%20%20%20%20%20%20%20%20if%20(item%20%3E%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20result%20%3D%20json%5Bitem%5D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20result%20%3D%20json%5Bjson.length%20%2B%20item%5D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20if%20(typeof%20result%20%3D%3D%20'object')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(result)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20result%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_itemH(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20item%20%3D%20this._fixInvalidJSONValues(this.json_valid_return(item))%3B%0D%0A%20%20%20%20%20%20%20%20let%20result%20%3D%20JSON.stringify(json.indexOf(item)%20%2B%201)%3B%0D%0A%20%20%20%20%20%20%20%20return%20result%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_from(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(Array.from(String(json)))%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_concat(%7B%20json%2C%20json2%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20json2%20%3D%20JSON.parse(json2)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json.concat(json2))%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_push(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20item%20%3D%20this._fixInvalidJSONValues(this.json_valid_return(item))%3B%0D%0A%20%20%20%20%20%20%20%20json.push(item)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_insert(%7B%20item%2C%20pos%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20item%20%3D%20this._fixInvalidJSONValues(this.json_valid_return(item))%3B%0D%0A%20%20%20%20%20%20%20%20json.splice(pos%20-%201%2C%200%2C%20item)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_set(%7B%20item%2C%20pos%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20json%5Bpos%20-%201%5D%20%3D%20this._fixInvalidJSONValues(this.json_valid_return(item))%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_delete(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20json.splice(item%20-%201%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_remove_all(%7B%20item%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20item%20%3D%20this._fixInvalidJSONValues(this.json_valid_return(item))%3B%0D%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20while%20(i%20%3C%20json.length)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(json%5Bi%5D%20%3D%3D%3D%20item)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20json.splice(i%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_fromto(%7B%20json%2C%20item%2C%20item2%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(JSON.parse(json).slice(item%20-%201%2Citem2))%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_reverse(%7B%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(JSON.parse(json).reverse())%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_flat(%7B%20json%2C%20depth%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(JSON.parse(json).flat(depth))%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_create(%7B%20text%2C%20d%20%7D)%20%7B%0D%0A%20%20%20%20%20%20return%20JSON.stringify(String(text).split(d))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_join(%7B%20json%2C%20d%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.parse(json).join(d)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_filter(%7B%20key%2C%20json%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json.map(x%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(hasOwn(x%2C%20key))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%5Bkey%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20return%20null%3B%0D%0A%20%20%20%20%20%20%20%20%7D))%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_array_setlen(%7B%20json%2C%20len%20%7D)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20json.length%20%3D%20len%3B%0D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(json)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20json_vm_getlist(%7B%20list%20%7D%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20let%20listVariable%20%3D%20this.lookupList(list%2C%20util)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(listVariable)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(listVariable.value)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20ignore%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20json_vm_setlist(%7B%20list%2C%20json%20%7D%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20let%20listVariable%20%3D%20this.lookupList(list%2C%20util)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(listVariable)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20array%20%3D%20JSON.parse(json)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(Array.isArray(array))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20safeArray%20%3D%20array.map(i%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20i%20%3D%3D%3D%20'object')%20return%20JSON.stringify(i)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20listVariable.value%20%3D%20safeArray%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20ignore%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%20%20Scratch.extensions.register(new%20JSONS())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0D%0A%20%20%20%20'use%20strict'%3B%0D%0A%20%20%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0D%0A%20%20%20%20%20%20%20%20throw%20new%20Error('This%20extension%20must%20run%20unsandboxed')%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20const%20canvas%20%3D%20Scratch.renderer.canvas%3B%0D%0A%0D%0A%20%20%20%20const%20updateStyle%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20filter%20%3D%20%60blur(%24%7Bblur%7Dpx)%20contrast(%24%7Bcontrast%20%2F%20100%7D)%20saturate(%24%7Bsaturation%7D%25)%20hue-rotate(%24%7Bcolor%7Ddeg)%20brightness(%24%7Bbrightness%7D%25)%20invert(%24%7Binvert%7D%25)%60%3B%0D%0A%20%20%20%20%20%20%20%20if%20(canvas.style.filter%20!%3D%3D%20filter)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.style.filter%20%3D%20filter%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20const%20imageRendering%20%3D%20resizeMode%20%3D%3D%3D%20'pixelated'%20%3F%20'pixelated'%20%3A%20''%3B%0D%0A%20%20%20%20%20%20%20%20if%20(canvas.style.imageRendering%20!%3D%3D%20imageRendering)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas.style.imageRendering%20%3D%20imageRendering%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%3B%0D%0A%20%20%20%20%2F%2F%20scratch-gui%20will%20sometimes%20reset%20the%20cursor%20when%20resizing%20the%20window%20or%20going%20in%2Fout%20of%20fullscreen%0D%0A%20%20%20%20new%20MutationObserver(updateStyle).observe(canvas%2C%20%7B%0D%0A%20%20%20%20%20%20attributeFilter%3A%20%5B'style'%5D%2C%0D%0A%20%20%20%20%20%20attributes%3A%20true%0D%0A%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20let%20blur%20%3D%200%3B%0D%0A%20%20%20%20let%20contrast%20%3D%20100%3B%0D%0A%20%20%20%20let%20saturation%20%3D%20100%3B%0D%0A%20%20%20%20let%20color%20%3D%200%3B%0D%0A%20%20%20%20let%20brightness%20%3D%20100%3B%0D%0A%20%20%20%20let%20invert%20%3D%200%3B%0D%0A%20%20%20%20let%20resizeMode%20%3D%20'default'%3B%0D%0A%0D%0A%20%20%20%20class%20CanvasEffects%20%7B%0D%0A%20%20%20%20%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20'theshovelcanvaseffects'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'Canvas%20Effects'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'seteffect'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20canvas%20%5BEFFECT%5D%20to%20%5BNUMBER%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'EFFECTMENU'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUMBER%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'geteffect'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'get%20canvas%20%5BEFFECT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'EFFECTGETMENU'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'cleareffects'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'clear%20canvas%20effects'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'renderscale'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20canvas%20render%20size%20to%20x%3A%5BX%5D%20y%3A%5BY%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setrendermode'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20canvas%20resize%20rendering%20mode%20%5BEFFECT%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'RENDERMODE'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECTMENU%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'blur'%2C%20'contrast'%2C%20'saturation'%2C%20'color%20shift'%2C%20'brightness'%2C%20'invert'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RENDERMODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'pixelated'%2C%20'default'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECTGETMENU%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'blur'%2C%20'contrast'%2C%20'saturation'%2C%20'color%20shift'%2C%20'brightness'%2C%20'invert'%2C%20'resize%20rendering%20mode'%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20geteffect(%7BEFFECT%7D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(EFFECT%20%3D%3D%3D%20'blur')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20blur%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'contrast')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20contrast%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'saturation')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20saturation%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'color%20shift')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20color%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'brightness')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20brightness%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'invert')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20invert%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'resize%20rendering%20mode')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20resizeMode%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20''%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20seteffect(%7BEFFECT%2C%20NUMBER%7D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(EFFECT%20%3D%3D%3D%20'blur')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blur%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'contrast')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contrast%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'saturation')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20saturation%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'color%20shift')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'brightness')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20brightness%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20'invert')%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invert%20%3D%20NUMBER%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20updateStyle()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20cleareffects()%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blur%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20contrast%20%3D%20100%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20saturation%20%3D%20100%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20color%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20brightness%20%3D%20100%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20invert%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resizeMode%20%3D%20'default'%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20updateStyle()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20setrendermode(%7BEFFECT%7D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resizeMode%20%3D%20EFFECT%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20updateStyle()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20renderscale(%7BX%2C%20Y%7D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20Scratch.vm.renderer.resize(X%2C%20Y)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20Scratch.extensions.register(new%20CanvasEffects())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [storage.AssetType.ImageVector, storage.AssetType.ImageBitmap, storage.AssetType.Sound],
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (false) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
